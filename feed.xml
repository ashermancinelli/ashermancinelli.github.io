<?xml version="1.0" encoding="utf-8"?><feed xmlns="http://www.w3.org/2005/Atom" ><generator uri="https://jekyllrb.com/" version="4.3.3">Jekyll</generator><link href="/feed.xml" rel="self" type="application/atom+xml" /><link href="/" rel="alternate" type="text/html" /><updated>2024-09-02T11:31:28-07:00</updated><id>/feed.xml</id><title type="html">Asher Mancinelli</title><subtitle>compilers, coffee, etc</subtitle><entry><title type="html">Linux Perf Notes</title><link href="/perf" rel="alternate" type="text/html" title="Linux Perf Notes" /><published>2024-08-31T00:00:00-07:00</published><updated>2024-08-31T00:00:00-07:00</updated><id>/Linux-Perf-Notes</id><content type="html" xml:base="/perf"><![CDATA[<p>How do I use perf again?</p>

<font size="-1">
  <em>
    These views do not in any way represent those of NVIDIA or any other organization or institution that I am professionally associated with.
    These views are entirely my own.
  </em>
</font>

<h2 id="rtfm">RTFM</h2>

<ul>
  <li><a href="https://www.brendangregg.com/perf.html">Brendan Gregg perf one-liners. Reread these every time. What you want is probably here.</a></li>
  <li><a href="https://www.man7.org/linux/man-pages/man1/perf.1.html">man perf</a></li>
  <li><a href="https://www.man7.org/linux/man-pages/man1/perf-list.1.html">man perf-list</a></li>
  <li><a href="https://www.man7.org/linux/man-pages/man1/perf-diff.1.html">man perf-diff</a></li>
</ul>

<h2 id="what-is-my-app-doing">What is my app doing?</h2>

<p>This script watches most of the events I care about and generates all the reports in one place.</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">set</span> <span class="nt">-x</span>

<span class="nv">events</span><span class="o">=</span><span class="s2">"cycles:u,instructions,user_time,cache-misses,branch-misses,task-clock"</span>
<span class="nv">freq</span><span class="o">=</span>99 <span class="c"># sampling frequency</span>
<span class="nv">app</span><span class="o">=</span><span class="nv">$PWD</span>/a.out
<span class="nv">config</span><span class="o">=</span><span class="s2">"</span><span class="nv">$*</span><span class="s2">"</span>
<span class="nv">name</span><span class="o">=</span><span class="si">$(</span><span class="nb">echo</span> <span class="s2">"</span><span class="nv">$*</span><span class="s2">"</span> | <span class="nb">sed</span> <span class="nt">-e</span> <span class="s1">'s/ /_/g'</span><span class="si">)</span>

<span class="nb">ulimit</span> <span class="nt">-Ss</span> unlimited
<span class="nb">test</span> <span class="nt">-d</span> <span class="nv">$name</span> <span class="o">||</span> <span class="nb">mkdir</span> <span class="nv">$name</span>
<span class="nb">pushd</span> <span class="nv">$name</span>

perf record <span class="se">\</span>
    <span class="nt">--output</span> perf.data <span class="se">\</span>
    <span class="nt">--call-graph</span> fp <span class="se">\</span>
    <span class="nt">-F</span> <span class="nv">$freq</span> <span class="nt">-e</span> <span class="s2">"</span><span class="nv">$events</span><span class="s2">"</span> <span class="se">\</span>
    <span class="nt">--</span> taskset 0x2 <span class="nv">$app</span> <span class="o">&gt;</span>/dev/null

perf report <span class="se">\</span>
    <span class="nt">--stdio</span> <span class="nt">-G</span> <span class="se">\</span>
    <span class="nt">--inline</span> <span class="nt">--itrace</span><span class="o">=</span>i <span class="se">\</span>
    <span class="o">&gt;</span> perf.report

perf <span class="nb">stat </span>record <span class="se">\</span>
    <span class="nt">-o</span> perf-stat.data <span class="se">\</span>
    <span class="nt">-e</span> <span class="s2">"</span><span class="nv">$events</span><span class="s2">"</span> <span class="se">\</span>
    <span class="nt">--</span> taskset 0x2 <span class="nv">$app</span> <span class="o">&gt;</span>/dev/null

<span class="c"># --stdio much preferred to --stdio2</span>
perf annotate <span class="nt">-i</span> perf.data <span class="nt">--stdio</span> <span class="o">&gt;</span> perf.annotate

<span class="nb">popd</span>
</code></pre></div></div>

<p>I like to create separate directories for all the data on a per-flag basis because I’m trying lots of different flags when investigating a performance change.
This way, each time I want to try another combination of flags, my history is preserved in its own directory and I don’t have to wait to look at any reports:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c"># whatever directory was created by the above script</span>
<span class="nv">d</span><span class="o">=</span><span class="s2">"flags"</span>
perf report <span class="nt">-i</span> <span class="nv">$d</span>/perf.data
perf <span class="nb">stat </span>report <span class="nv">$d</span>/perf-stat.data
<span class="nv">$PAGER</span> <span class="nv">$d</span>/perf.annotate
<span class="nv">$PAGER</span> <span class="nv">$d</span>/perf.report
</code></pre></div></div>

<p>NOTE: make sure you build with <code class="language-bash highlighter-rouge"><span class="nt">-fno-omit-frame-pointer</span></code> so perf can give you reasonable traces.
Debug info works <em>okayyy</em> but you’ll end up with <em>massive</em> data dumps that take forever to load into perf-report and other tools.</p>

<h2 id="why-is-my-app-slower-when-i-x">Why is my app slower when I X?</h2>

<p>NOTE: perf-diff is worse when name mangling is different (e.g. with Fortran apps) because perf can’t match the events up.</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>make <span class="nv">FLAGS</span><span class="o">=</span><span class="s2">"-O0"</span>
perf record ...
make <span class="nv">FLAGS</span><span class="o">=</span><span class="s2">"-O3"</span>
perf record ...
perf diff
</code></pre></div></div>]]></content><author><name></name></author><category term="linux, c++, perfanalysis" /><summary type="html"><![CDATA[How do I use perf again?]]></summary></entry><entry><title type="html">Shell and Scripting Notes</title><link href="/shell" rel="alternate" type="text/html" title="Shell and Scripting Notes" /><published>2024-08-30T00:00:00-07:00</published><updated>2024-08-30T00:00:00-07:00</updated><id>/Shell</id><content type="html" xml:base="/shell"><![CDATA[<p>What I need to remember when scripting</p>

<font size="-1">
  <em>
    These views do not in any way represent those of NVIDIA or any other organization or institution that I am professionally associated with.
    These views are entirely my own.
  </em>
</font>

<h2 id="vim">Vim</h2>

<h3 id="localremote-editing-with-neovim-and-neovide">Local+Remote Editing With Neovim And Neovide</h3>

<p>First log into my machine forwarding port 6666 and attach to my tmux sessions</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="o">(</span><span class="nb">local</span><span class="o">)</span>  <span class="nv">$ </span>ssh <span class="nt">-L</span> 6666:localhost:666 host
<span class="o">(</span>remote<span class="o">)</span> <span class="nv">$ </span>tmux attach
</code></pre></div></div>

<p>Then when I want to edit something with a gui I start up neovim remotely:</p>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="o">(</span>remote<span class="o">)</span> <span class="nv">$ </span>nvim <span class="nt">--listen</span> localhost:6666 <span class="nt">--headless</span> ./file.c
</code></pre></div></div>

<p>Or by running <code class="language-bash highlighter-rouge">:call serverstart<span class="o">(</span><span class="s2">"localhost:6666"</span><span class="o">)</span></code> in a neovim session I already have open and want to attach to locally.</p>

<p>Then locally I start up neovide to get the local gui:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="o">(</span><span class="nb">local</span><span class="o">)</span>  <span class="nv">$ </span>neovide <span class="nt">--no-multigrid</span> <span class="nt">--fork</span> <span class="nt">--server</span> localhost:6666
</code></pre></div></div>

<h3 id="plugins">Plugins</h3>

<p>I use lazy.nvim. Call <code class="language-bash highlighter-rouge">:Lazy</code> to manage plugins.</p>

<p><a href="https://castel.dev/post/lecture-notes-1/">crazy blog post on completions in vim</a></p>

<h2 id="shellscripting">Shell/Scripting</h2>

<h3 id="gnu-parallel">GNU Parallel</h3>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  <span class="nb">seq </span>200 | parallel <span class="nt">--bar</span> ./t.sh <span class="o">{}</span> <span class="s1">'&gt;'</span> ajm-<span class="o">{}</span>.txt
</code></pre></div></div>

<p>Used with some test script like this to find corner cases:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  <span class="nv">$ </span><span class="nb">cat </span>t.sh
  <span class="nv">init</span><span class="o">=</span><span class="nv">$PWD</span>
  <span class="nb">cd</span> <span class="si">$(</span><span class="nb">mktemp</span> <span class="nt">-d</span><span class="si">)</span>
  <span class="nb">echo</span> <span class="nv">$1</span>
  ./exe <span class="nv">$1</span> &amp;&gt; stdout
  diff stdout <span class="nv">$init</span>/correct <span class="o">&amp;&amp;</span> <span class="nb">echo </span>pass
</code></pre></div></div>

<p>This way I can run the executable N times and then recursively grep the output directory to find any cases that passed/failed.</p>

<h3 id="bash-regex">Bash REGEX</h3>

<p>Use <code class="language-bash highlighter-rouge"><span class="nv">$BASH_REMATCH</span></code> or <code class="language-bash highlighter-rouge"><span class="k">${</span><span class="nv">BASH_REMATCH</span><span class="p">[@]</span><span class="k">}</span></code> with the regex match operator in a test expression:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span><span class="o">[[</span> <span class="s2">" -c -fPIC /path/to/file.F90 "</span> <span class="o">=</span>~ <span class="o">[</span>^<span class="se">\ </span><span class="o">]</span>+/file.F90 <span class="o">]]</span> <span class="o">&amp;&amp;</span> <span class="nb">echo</span> <span class="k">${</span><span class="nv">BASH_REMATCH</span><span class="p">[@]</span><span class="k">}</span>
/path/to/file.F90
</code></pre></div></div>

<p><a href="http://molk.ch/tips/gnu/bash/rematch.html">more bash regex stuff</a></p>

<h3 id="cli">CLI</h3>

<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">exe</span><span class="o">=</span><span class="nv">$0</span>
usage<span class="o">()</span> <span class="o">{</span>
    <span class="nb">cat</span> <span class="o">&lt;&lt;</span><span class="no">EOD</span><span class="sh">
</span><span class="no">EOD
</span>    <span class="nb">exit </span>1
<span class="o">}</span>

<span class="nv">port</span><span class="o">=</span>6666
<span class="nv">cmd</span><span class="o">=</span><span class="s2">""</span>
<span class="nv">host</span><span class="o">=</span><span class="s2">""</span>
<span class="k">while</span> <span class="o">[[</span> <span class="nv">$# </span><span class="nt">-ne</span> 0 <span class="o">]]</span><span class="p">;</span> <span class="k">do
  case</span> <span class="nv">$1</span> <span class="k">in</span>
    <span class="nt">-p</span><span class="p">)</span> <span class="nv">port</span><span class="o">=</span><span class="nv">$2</span><span class="p">;</span> <span class="nb">shift</span><span class="p">;;</span>
    <span class="nt">-h</span><span class="p">)</span> <span class="nv">host</span><span class="o">=</span><span class="nv">$2</span><span class="p">;</span> <span class="nb">shift</span><span class="p">;;</span>
    <span class="nt">--</span><span class="p">)</span> <span class="nb">shift</span><span class="p">;</span><span class="nv">cmd</span><span class="o">=</span><span class="s2">"</span><span class="nv">$*</span><span class="s2">"</span><span class="p">;</span><span class="nb">shift</span> <span class="nv">$#;</span><span class="p">;</span>
    <span class="k">*</span><span class="o">)</span> usage<span class="p">;;</span>
  <span class="k">esac</span>
  <span class="nb">shift
</span><span class="k">done</span>
</code></pre></div></div>

<h3 id="strings">Strings</h3>

<p>global sub</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  <span class="nv">$ var</span><span class="o">=</span><span class="s2">"some text to work with, more text"</span>
  <span class="nv">$ </span><span class="nb">echo</span> <span class="k">${</span><span class="nv">var</span><span class="p">//text/content</span><span class="k">}</span>
  some content to work with, more content
</code></pre></div></div>

<p>previous command with some replacement</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  <span class="nv">$ </span><span class="nb">echo </span>one two three one
  one two three one
  <span class="nv">$ </span><span class="o">!!</span>:gs/one/five
  <span class="nv">$ </span><span class="nb">echo </span>five two three five
  five two three five
</code></pre></div></div>

<p>local sub</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  <span class="nv">$ </span><span class="nb">echo</span> <span class="k">${</span><span class="nv">var</span><span class="p">/text/content</span><span class="k">}</span>
  some content to work with, more text
</code></pre></div></div>

<p>Deletes LONGEST match, be careful of ./file.txt as the ./ component will get the whole thing removed.</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  <span class="nv">$ file</span><span class="o">=</span>log.txt
  <span class="nv">$ </span><span class="nb">echo</span> <span class="k">${</span><span class="nv">file</span><span class="p">%%.*</span><span class="k">}</span>
  log

  <span class="nv">$ file</span><span class="o">=</span>./log.txt
  <span class="nv">$ </span><span class="nb">echo</span> <span class="k">${</span><span class="nv">file</span><span class="p">%.*</span><span class="k">}</span>
  ./log
</code></pre></div></div>

<p>string casing</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  <span class="nv">x</span><span class="o">=</span><span class="s2">"HELLO"</span>
  <span class="nb">echo</span> <span class="nv">$x</span>  <span class="c"># HELLO</span>
</code></pre></div></div>

<p>tolower</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  <span class="nv">y</span><span class="o">=</span><span class="k">${</span><span class="nv">x</span><span class="p">,,</span><span class="k">}</span>
  <span class="nb">echo</span> <span class="nv">$y</span>  <span class="c"># hello</span>
</code></pre></div></div>

<p>toupper</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  <span class="nv">z</span><span class="o">=</span><span class="k">${</span><span class="nv">y</span><span class="p">^^</span><span class="k">}</span>
  <span class="nb">echo</span> <span class="nv">$z</span>  <span class="c"># HELLO</span>
</code></pre></div></div>

<p><a href="https://tldp.org/LDP/abs/html/string-manipulation.html">Linux documentation on string manipulation</a></p>

<h2 id="perl">Perl</h2>

<h3 id="one-liners">One-Liners</h3>

<p>(Other perl one-liners)[https://learnbyexample.github.io/learn_perl_oneliners/one-liner-introduction.html]</p>

<p>print line number and line of matching regex</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>perl <span class="nt">-ne</span> <span class="s1">'printf "%8d %s", $., $_ if /pattern/'</span>
</code></pre></div></div>

<p>in-place replacement of input</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>perl <span class="nt">-pi</span>.bk <span class="nt">-E</span> <span class="s1">'s/, !dbg !\d+//'</span> good.llvm
      |      |                 | input file
      |      | regex/code/replacement
      | backup file extension to use
</code></pre></div></div>

<h3 id="getopt">Getopt</h3>

<div class="language-perl highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
</code></pre></div></div>

<h3 id="misc">Misc</h3>

<p>Print the command to be run, run the arguments in a shell, and print all the lines of stderr/stdout:</p>

<div class="language-perl highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">sub </span><span class="nf">sh</span> <span class="p">{</span>
    <span class="k">my</span> <span class="nv">$cmd</span><span class="o">=</span><span class="p">"</span><span class="si">@_</span><span class="p">";</span>
    <span class="nb">chomp</span><span class="p">(</span><span class="nv">$cmd</span><span class="p">);</span>
    <span class="nv">say</span> <span class="nv">$cmd</span><span class="p">;</span>
    <span class="nb">open</span> <span class="k">my</span> <span class="nv">$fh</span><span class="p">,</span> <span class="p">"</span><span class="si">$cmd</span><span class="s2">|</span><span class="p">";</span>
    <span class="k">print</span> <span class="k">while</span> <span class="p">(</span><span class="o">&lt;</span><span class="nv">$fh</span><span class="o">&gt;</span><span class="p">);</span>
    <span class="nb">close</span> <span class="nv">$fh</span><span class="p">;</span>
    <span class="nv">say</span> <span class="p">"</span><span class="s2">ec=$?</span><span class="p">";</span>
<span class="p">}</span>
</code></pre></div></div>]]></content><author><name></name></author><category term="linux, shell, scripting" /><summary type="html"><![CDATA[What I need to remember when scripting]]></summary></entry><entry><title type="html">Barista - 9/10</title><link href="/barista" rel="alternate" type="text/html" title="Barista - 9/10" /><published>2023-06-22T00:00:00-07:00</published><updated>2023-06-22T00:00:00-07:00</updated><id>/Barista</id><content type="html" xml:base="/barista"><![CDATA[<p>Solid option in NW Portland with a variety of local roasts, not just their own.</p>

<hr />

<p>I had the spirit lifter blend from Puff roasters, which was unfortunately out of stock in the consumer-sized bags, so I was unable to see the actual roast level, flavor comps, etc.
It tasted like a medium roast with some very mild sweetness, almost like a vanilla tea; very clear, very light body.</p>

<p>They had two other roasts on espresso; this is a thoughtful cafe with interesting roasts.
I plan on returning to rate all three roasts they have available, and I’ll keep my eyes on what new roasts they bring into the shop.</p>

<p>Although they roast their own coffee, they also bring in beans from other local roasters.
Sourcing and serving the best local beans is their mission statement, as listed on their website.</p>

<hr />

<h3>
    <center>
    <a href="https://baristapdx.com/" target="blank">
    Barista homepage
    </a>
    </center>
</h3>]]></content><author><name></name></author><summary type="html"><![CDATA[Solid option in NW Portland with a variety of local roasts, not just their own.]]></summary></entry><entry><title type="html">Sterling - 10/10</title><link href="/sterling" rel="alternate" type="text/html" title="Sterling - 10/10" /><published>2023-06-22T00:00:00-07:00</published><updated>2023-06-22T00:00:00-07:00</updated><id>/Sterling</id><content type="html" xml:base="/sterling"><![CDATA[<p>This place is something special. <em>Please</em> don’t leave Portland without trying their espresso.</p>

<hr />

<p><em>6/21/23 update:</em></p>

<p>In my second visit, I had another Etheopian roast, the <em>Sidama Setamo</em>, an Etheopian washed-process SO Heirloom roast with bergamot and wild cherries as flavor comps.
The barista compared the roast to Fruit Loops, which felt far closer to my experience than the listed comps; I also got notes of green apple.</p>

<p>I’m determined to try every roast this place puts on espresso;
if I ever move out of Portland I’m going to kick myself for not having as much of this espresso as I can.
This may be consistently the best espresso I’ll ever have.</p>

<p>I got to sit with Eric (the owner) for a minute today and ask a few questions about Sterling.
He started the operation in 2005 (under a different name I believe) and now has a team working at the roaster while he spends most of his time at the cafe interacting with customers and tasting roasts.</p>

<p>He spoke really highly of Keeper cafe (which I had never heard of) as well as Barista (which I tried later that day) as well as Courier, which is currently somewhere in my top 5 cafes &amp; roasters in Portland.
He also referred to Vivace in Seattle as the Mecca of the 90s and 2000s coffee culture, but lamented the lack of innovation he’s seen in Seattle’s coffee scene in the years since; he used to take new employees up to thier roaster to learn the trade.
Same with Slate roasters, who have since closed their doors.</p>

<p>I hope to set up a more formal interview with Eric sometime to tell Sterling’s story.</p>

<hr />
<p><em>6/14/23 (original review):</em></p>

<p>Prior to trying Sterling’s espresso, the #1 on my list was from Courier Coffee.
When I told the barista at Courier how much I enjoyed their espresso, he made sure to recommend Sterling for my next stop.</p>

<blockquote>
  <p>Oh, you like espresso? Yeah, you should definitely check out Sterling</p>
</blockquote>

<p>He backed that comment up with a few more remarks about how special their espresso is, and it went to the top of my list of places to try next.
It did not dissapoint.</p>

<hr />

<p>The barista was excited to welcome me in and tell me all about the roast they had ready for espresso, which happened to be the <em>Nigusse Lemma</em>, a natural-process small-batch Ethiopian roast with Etheopian Heriloom varietals.
I got the same feelings I get trying a new whiskey at the Scotch Lounge on the East side of town - she talked through the roasting process at their East-side roastery and the origins of the beans.</p>

<p>After pulling the shot, she put together a board with a small glass of sparkling water as a pallate clenser (as is usual in espresso-focused cafes).</p>

<p>Adding to the Scotch Lounge feelings, the espresso was served in a glencairn-style whiskey serving glass along with a third glass with a drip brew so as to try the roast from another perspective.</p>

<p>Both coffees were smooth and creamy - I jotted down <em>notes of strawberries and cream</em> before I even saw <em>“Raspberry &amp; Vanilla Cream”</em> listed as flavor comps on the bag of coffee they used for my espresso.</p>

<hr />

<p>This espresso struck me as <strong><em>perfectly balanced</em></strong> - without hesitation, I wanted to share it with every one of my friends still not won over by espresso.
In my experience, when people try espresso and decide they hate it, 95% of the time it’s due to the intensity of the flavors, especially with sour and bitter notes.
When I try an intense espresso, something that punches you in the mouth with sourness or fruit or bitterness or chocolate or nuttiness, I can enjoy the intensity (if it’s done well!) - but that seems to be the attribute of espresso that puts people off of it.</p>

<p>This espresso was not intense in the usual way, but not too mild either.
It was full of flavor with delicious notes of citrus, cream, a balance of bitterness to round out the flavor profile, yet not too intense to be someone’s first espresso.</p>

<p>This espresso, along with their drip brew, the knowledgable baristas, and a cozy cafe seating area nestled into NW Portland with indoor trees and fast wifi brings this to the top of my list.
The barista who served me happened to recommend <em>Barista</em> for one of my next espresso destinations which I haven’t had the opportunity to try yet - I look forward to posting a review given that the current champion of my list thinks I should give it a try.</p>

<p>As I work out an espresso tour of Portland, I <em>have</em> to pencil Sterling in as the final destination.
I would want any espresso afficionados visiting the city to finish their time here with a Sterling espresso.</p>

<hr />

<h3>
    <center>
    <a href="https://www.sterling.coffee/" target="blank">
    Sterling Coffee homepage
    </a>
    </center>
</h3>]]></content><author><name></name></author><summary type="html"><![CDATA[This place is something special. Please don’t leave Portland without trying their espresso.]]></summary></entry><entry><title type="html">Superjoy Coffee Lab &amp;amp; Roasters - 10/10</title><link href="/superjoy" rel="alternate" type="text/html" title="Superjoy Coffee Lab &amp;amp; Roasters - 10/10" /><published>2023-06-21T00:00:00-07:00</published><updated>2023-06-21T00:00:00-07:00</updated><id>/Superjoy</id><content type="html" xml:base="/superjoy"><![CDATA[<p>There’s too much to say. You should really just go try their espresso.</p>

<hr />

<h5>
    Superjoy attempts to bring a blend of artful appreciation of coffee and chinese culture to the Portland coffee scene.
</h5>

<hr />

<p>I tried not to eavesdrop, but while I drank my coffee and enjoyed the ambiance of the shop, I couldn’t help but overhear Christopher (who seems to be the primary roaster) training up a new employee.
I overheard him gently preaching the value of <em>consistency</em> in a barista; how to consistently and diligently clean your workspace in between every shot, how to measure all the observable input variables, how to deliver the same shot over and over again.</p>

<p>He <em>clearly</em> cares about his coffee and the presentation of his roasts, which he seems to put 100% effort into.</p>

<hr />

<p>My espresso tasted perfectly balanced with a mild finish; on the darker side of fruity with notes of cherry and pomegranate and a bit of nuttiness.
I had their medium roast blend of natural-process Ethiopian and washed-process Guatamalan beans</p>

<p>Christopher was excited to tell me about ever aspect of his shop, from the new design and branding language he recently brought to the bags to the procurement of the different beans he roasts in-house.</p>

<p>While I listened to Chris passionately give me every detail about his shop, I noticed some <em>very</em> interesting specialty drinks on the seasonal menu: a chinese pepper mocha, a rose honey latte, and a maple oat latte.
This heavily reminded me of Never Coffee’s creative seasonal specialty lattes.</p>

<hr />

<p>Chris also mentioned that they usually have some chinese beans in house, but happened to be out that day; I had never (to my knowledge) tried chinese-grown beans before, so I plan to visit next week when they (hopefully) have them back in stock.</p>

<!--
- perfectly balanced
- fruity, but a little on the darker side, like a cherry or pomegranate.

- they usually roast chinese beans, but they were out when I went by.
- maybe a cupping next week when their chinese beans are back in stock
- Blend of natural-process Ethiopian and washed-process Guatamalan beans
    - chocolate and nutty notes
    - medium roast

- Chinese pepper mocha, rose honey latte, maple oat latte
- Chinese single origin coffee of the typica variety
-->

<hr />

<h3>
    <center>
    <a href="https://www.superjoycoffeelab.com" target="blank">
    Superjoy homepage
    </a>
    </center>
</h3>]]></content><author><name></name></author><summary type="html"><![CDATA[There’s too much to say. You should really just go try their espresso.]]></summary></entry><entry><title type="html">Seattle Trip Report (8 Reviews)</title><link href="/seattle-trip-report" rel="alternate" type="text/html" title="Seattle Trip Report (8 Reviews)" /><published>2023-06-19T00:00:00-07:00</published><updated>2023-06-19T00:00:00-07:00</updated><id>/Seattle-Trip-Report</id><content type="html" xml:base="/seattle-trip-report"><![CDATA[<p>All the shops and roasters I tried while visiting my friend in Seattle!</p>

<hr />

<h2 id="lets-get-the-ratings-out-of-the-way">Let’s Get the Ratings Out of the Way</h2>

<ol>
  <li>Cafe Allegro: 8.5/10</li>
  <li>Cafe Vita: 8/10</li>
  <li>Cafe Ladro: 8.5/10</li>
  <li>Zeitgeist: 6.5/10</li>
  <li>Good Weather Bike &amp; Coffee: 7.5/10</li>
  <li>Lighthouse Roasters: 7/10</li>
  <li>Monorail Espresso: 3/10</li>
  <li>Fonté: 2/10</li>
</ol>

<h2 id="overall-impressions">Overall Impressions</h2>

<p>I was struck by how much more prevalent darker roasts were in Seattle - it was my impression that most specialty espresso was in the lighter range of roasts to bring out more of the differences between varietals.
Almost every shop I visited served a pretty dark and heavy-bodied roast for their espresso, and few places changed their roasts out with the seasons.</p>

<p>I spoke with Collin from Cafe Ladro about the coffee culture in Seattle:</p>

<blockquote>
  <p>We were really ahead of our time in the 90s, but most places haven’t been updated since then.
You would probably find fewer shops serving lighter (and better) roasts in a newer place like Portland.
Things are even worse in San Fran - they were killing the game 30 years ago, but if you go now it’s mostly the same stuff.</p>
</blockquote>

<p>That being said, there were still some <em>great</em> spots roasting beans in-house.
<strong><em>Cafe Ladro</em></strong> (where I met Collin) and <strong><em>Cafe Vita</em></strong> were wonderful.
<strong><em>Cafe Allegro</em></strong> was a hidden gem I would <em>absolutely</em> swing by again, especially given how close it is to the 1 metro line; I had two coffees with an old friend there before hopping on the 1 to catch my Amtrack back to Portland, but I could have stayed much longer.
<strong><em>The Good Weather Bike &amp; Coffee</em></strong> cafe-and-bike-repair-shop-combo served a really nice Herkimer espresso blend, who roasts their beans a few neighborhoods away.</p>

<p>Collin mentioned Superjoy Roasters in Portland, and though they are on my list I have not stopped by there yet.</p>

<!---
- milstead in freemont
- were ahead of the curve in the 90s haven't really updated 
- san fran is worse than seattle
- collin 
- superjoy
- kurasu roasters from japan
-->

<h2 id="cafe-allegro-8510">Cafe Allegro: 8.5/10</h2>

<p>Hidden in an alleyway in between a used bookstore and a pizza joint, Cafe Allegro had the most enjoyable espresso of any of the cafes I visited in Seattle.
The barista had a t-shirt reading <em>Where the hell is Allegro?</em> paying homage to the cafe’s obscure location.</p>

<p>I felt a sense of relief when I took my first sip of Allegro’s espresso and felt familiar waves of fruit wash over me.
For most of my coffee-drinking life I considered myself more of a dark-roast kinda guy, but since getting more into espresso and going back to darker roasts, I feel like my taste has developed to like well-done lighter roasts far more.</p>

<p>I got notes of berries (strawberries?) and dried fruit.
The listed flavor comps were stone fruit (?) and chocolate.
I didn’t get much of either of those, but I still loved it (and went back for a second).</p>

<p>The barista mentioned a cafe in northern San Fransisco named after the Italian city <em>Trieste</em> after which Cafe Allegro was designed; maybe if my espresso journey takes me that far I’ll give it a try!
Definitely stop by if you have some time near the 1 line in the University District.</p>

<h2 id="cafe-vita-810">Cafe Vita: 8/10</h2>

<p>I had the <em>Cafe del Sol</em>, a house-roasted medium blend.
It was pretty good - the first &gt;=8 score of this Seattle trip.
I experienced medium body, balanced flavor (not nearly as dark as my previous shots) on the nutty side of sweet.
The flavor comps on the bag read <em>milk chocolate, caramel, dark cherry</em>; I mostly got the caramel.</p>

<p>Nothing mind-blowing, but I would have it again.</p>

<h2 id="cafe-ladro-8510">Cafe Ladro: 8.5/10</h2>

<p>This was the first specialty espresso place I got to visit.
I had the Ladro house medium blend with milk chocolate, dark cherry and caramel flavor comps, but the strongest flavors I got were nuttiness/hazelnut and vanilla.
I found a really mild finish, I wasn’t punched in the nose by bitterness or dryness like many of the other shops.</p>

<p>This was a really nice espresso! If you’re in the West Queen Anne area you might want to stop by.</p>

<h2 id="zeitgeist-6510">Zeitgeist: 6.5/10</h2>

<p>This smaller German coffeehouse with aged brick walls was a nice environment and okayish coffee, but wasn’t overly impressive to me.
Unfortunately, they didn’t seem all that busy either - I could see myself coming back if I needed a place to work or if I knew there would be a more busy or upbeat energy, but this was not my favorite place.
I had the Jackson Street Blues roast from Fulcrum Coffee Roasters.</p>

<h2 id="good-weather-bike--coffee-7510">Good Weather Bike &amp; Coffee: 7.5/10</h2>

<p>Good Weather was interesting - the cafe environment was serene, tucked into an alleyway in Capitol Hill near a secondhand sportswear shop.
I was excited to see them serving Herkimer’s espresso blend; I wanted to try these beans from a Herkimer cafe front, but I didn’t get the chance.</p>

<p>I got a lighter body, almost like a black tea and a <em>much</em> lighter roast than some of the other (read: worse) shots I tried this weekend.
I tasted soem chamomile and dried fruits, maybe raisins/craisins.</p>

<h2 id="lighthouse-roasters-710">Lighthouse Roasters: 7/10</h2>

<p>This neighborhood roaster was <em>filled</em> with dogs, and the cafe bar shelved probably a dozen kinds of dog treats.
The roast was too dark for specialty espresso, but I would absolutely have an americano or latte of their house roast.
I get the sense the neighborhood patrons stop by for a coffee and grab a bag of their house roast for their drip machine at home.
An extremely small and cozy shop with maybe 4 small tables right next to the roasters and at least half a dozen bags of green coffee beansready to be processed.</p>

<p>If I lived next to this cafe, I’d probably be drinking far more americano for how enjoyable their cafe environment was.</p>

<h2 id="monorail-espresso-310">Monorail Espresso: 3/10</h2>

<p>The cute window-only cafe front was unfortunately not very good…
Very dry, very dark, HEAVY body.
The smells from the cafe and from my espresso were wonderful (I still <em>love</em> a dark-roast) but my espresso was not very good.
My friend’s vanilla latte was great though!</p>

<h2 id="fonté-210">Fonté: 2/10</h2>

<p>Fonté was unfortunately the first espresso in this entire journey that I could not even finish.
Extremely dark and heavy-bodied, my mouth puckered up with bitterness with both of the sips I could get down.
Very unfortunate.</p>

<hr />

<p>Thanks to my friend Emma that stuck with me and my annoying coffee flavor charts and endless cafes :)</p>]]></content><author><name></name></author><summary type="html"><![CDATA[All the shops and roasters I tried while visiting my friend in Seattle!]]></summary></entry><entry><title type="html">Upper Left Roasters - 9.5/10</title><link href="/upperleft" rel="alternate" type="text/html" title="Upper Left Roasters - 9.5/10" /><published>2023-06-15T00:00:00-07:00</published><updated>2023-06-15T00:00:00-07:00</updated><id>/Upper-Left-Roasters</id><content type="html" xml:base="/upperleft"><![CDATA[<p>Unique energy, passionate about espresso.</p>

<hr />

<p>Named for it’s location relative to the Ladd’s Edition neighborhood in SE Portland, this roaster and cafe front has <em>several</em> roasts available for espresso at any given time (and one or two more specifically for drip and pour-over).</p>

<p>The flavor comps for the roast I tried were absolutely spot-on: I got strong notes of sweetness and white chocolate from the <em>90h Tabi</em>.
These Tabi beans from Tolima, Colombia underwent a 90-hour submerged fermentation process.
I hadn’t heard of the Tabi variety before: it’s a hybrid of bourbon, typica, and timor varietials.
<strong>
    Upper Left is <em>clearly</em> passionate about espresso, but has something for everyone: more than half of the patrons were sporting iced lattes on the Friday afternoon I stopped in.
</strong></p>

<p>The venue is very unique as well: the roasting machine is separated from the cafe by only a bar seating area; you can sit right next to the roasting machine if you like.
The white walls, light wooden furnishing, and ample indoor and outdoor seating made for a wonderful environment.</p>

<p>Speaking of the outdoor seating, there was a DJ playing lowkey club mixes over industrial-sized speakers in the outdoor seating area which happened to be almost entirely full; the neighborhood clearly takes full advantage of having this cafe so accessible.</p>

<p>Upper Left is a must-try.</p>

<hr />

<h3>
    <center>
        <a href="https://upperleftroasters.com/" target="blank">
        Upper Left Roasters homepage
        </a>
    </center>
</h3>]]></content><author><name></name></author><summary type="html"><![CDATA[Unique energy, passionate about espresso.]]></summary></entry><entry><title type="html">Rose City Coffee - 7/10</title><link href="/rose-city" rel="alternate" type="text/html" title="Rose City Coffee - 7/10" /><published>2023-06-15T00:00:00-07:00</published><updated>2023-06-15T00:00:00-07:00</updated><id>/Rose-City-Coffee</id><content type="html" xml:base="/rose-city"><![CDATA[<p>Do you like blonde roasts or need a beautiful space to get some work done?</p>

<hr />

<p>The first thing to draw me in to a coffee shop is usually the smells - pastries, coffee, and maybe the nutty wooden smell of roasting if I’m lucky enough to be in a roastery.</p>

<p>Walking into Rose City Coffee however, I was struck by the dark cherry-wood and soft-touch-textured metal furnishing, the brick walls, and the wide-open cafe space - there are no walls or furniture to obstruct your view of one side of the cafe from the other, combining with the floor-to-celeing windows to make the space feel larger than it is.</p>

<hr />

<p>I had the <em>Floribunda</em>, a medium blend with chocolate and floral flavor comps… and that’s about all I could find about the roast between asking in the shop and looking online.
This is obviously not an espresso specialty shop, but my doppio was still alright.</p>

<p>I got quite a bit of sourness up front, without much darkness or bitterness to balance it out.
If you’re a fiend for blonde roasts, this would be a pretty fun place to stop - but the menu seems to emphasize lattes, so I don’t know that I would recommend this spot to a huge fan of blonde <em>espresso</em>.</p>

<p><em>Personally</em>, I would have loved a darker roast and a <em>LOT</em> more information about the beans, but espresso isn’t every shop’s emphasis, and that’s alright too.
Their food options looked (and smelled) amazing as well.</p>

<p>Rose City will live in my head as the place to go if I need to stay put somewhere for all day - great food, decent coffee, and a free-feeling space that I could spend a whole workday at.</p>

<hr />

<p>On top of the food, coffee, and environment, the friend that recommended this place to me remarked that they have live music on Saturdays!
The community events add to Rose City’s vibe, which leaves it feeling remarkably like the Flying M coffee shop in the Boise, Idaho area, my all-around favorite shop from my time living there.</p>

<p>The Flying M will always have a special place in my heart, so I can’t help but feel sentimental cracking open my laptop to get some work done in the refreshing Rose City seating area.
It’s worth stopping by if you’re in the SE part of the city (especially on a Saturday 😊).</p>

<hr />

<h3>
    <center>
        <a href="https://www.rosecitycoffeecompany.com/" target="blank">
        Rose City Coffee homepage
        </a>
        <hr />
        <a href="https://www.flyingmcoffee.com/" target="blank">
        The Flying M homepage
        </a>
    </center>
</h3>]]></content><author><name></name></author><summary type="html"><![CDATA[Do you like blonde roasts or need a beautiful space to get some work done?]]></summary></entry><entry><title type="html">Nossa Familia Coffee - 9/10</title><link href="/nossa" rel="alternate" type="text/html" title="Nossa Familia Coffee - 9/10" /><published>2023-06-15T00:00:00-07:00</published><updated>2023-06-15T00:00:00-07:00</updated><id>/Nossa-Familia-Coffee</id><content type="html" xml:base="/nossa"><![CDATA[<p>Delicious, well-balanced, predominantly Brazilian roasts and espresso.</p>

<hr />

<p>I’ve had espresso from Nossa before at their northern location in the Pearl where I had one of their in-house roasts, but when I stopped by for this review they had a roast from Keia &amp; Martyn’s Coffee roasters (also based out of Portland).
This black-owned roaster was featured in the SE Nossa cafe I visited for the month of June (I’ll just have to revisit when they have their own roasts on espresso😉).</p>

<p>The Colombian Yeny Capiz roast from Keia &amp; Martyn’s <em>radical</em> line had flavor comps of molasses, sweet red tea, citrus, and candied hazelnut, though I didn’t get much of the citrus.
My coffee tasted balanced, nutty, and a bit sweet; the molasses and candied hazelnut came through pretty clearly to me.</p>

<p>Augusto Carneiro started Nossa to bring his family’s coffee to Portland from Brazil, and the shop continues to pride itself on the farmer-roaster relationships they have with all of their growers, which now come from Guatemala, Nicaragua, Peru, Ethiopia as well.</p>

<p>My coffee was solid: well-rounded, tasty, not overpowering.
It didn’t show up Courier or Sterling, but it was also clearly in the top echelon of coffees I’ve had in the city.</p>

<hr />

<h3>
    <center>
        <a href="https://www.nossacoffee.com/" target="blank">
        Nossa Familia Coffee homepage
        </a>
        <hr />
        <a href="https://keiaandmartynscoffee.com/" target="blank">
        Keia &amp; Martyn's Coffee Roasters homepage
        </a>
    </center>
</h3>]]></content><author><name></name></author><summary type="html"><![CDATA[Delicious, well-balanced, predominantly Brazilian roasts and espresso.]]></summary></entry><entry><title type="html">Adapt Cafe - 9.5/10</title><link href="/adapt-cafe" rel="alternate" type="text/html" title="Adapt Cafe - 9.5/10" /><published>2023-06-15T00:00:00-07:00</published><updated>2023-06-15T00:00:00-07:00</updated><id>/Adapt-Coffee</id><content type="html" xml:base="/adapt-cafe"><![CDATA[<p>Pleasant, mild, unique, imported roasts from Sweden - try some beans you’ll likely not find anywhere else!</p>

<hr />

<p>The first thing I look for when I walk into a new cafe in the Portland area is the coffee bags the shop is selling:</p>

<blockquote>
  <p>Are they using Coava or Proud Mary beans? Do they roast their own? Am I trying something new today, or maybe an old favorite?</p>
</blockquote>

<p>Walking into Adapt Cafe in SE, I was surprised to see bags I’d not seen before - light and modern packaging around small, 250 gram bags from <em>Morgon Coffee Roasters</em> from Gothenburg, Sweden.</p>

<p>The swedish beans bled out into the design language of the shop - smallish seating area with huge windows and modern-feeling all-black furnishing against white walls.
The barista was happy to tell me about the imported roasts from the <em>very</em> young 5-year-old roasting company they buy from, and the rapid pace at which they have been winning awards:</p>

<blockquote>
  <p>Our combined resume contains… competing in most things coffee.
Some of those competitions resulted in a <strong><em>bronze in roasting, two silvers in brewing and two gold medals in coffee tasting</em></strong>.</p>

  <p>In 2020 we had our first prize spotlight for Morgon when we were <strong><em>finalists in the 12th annual international Sprudgie’s award as “Most notable roaster in 2020”</em></strong>.</p>

  <ul>
    <li>Morgon Coffee Roasters’ “About Us” page, see links below</li>
  </ul>
</blockquote>

<hr />

<p>I found the espresso to be very pleasant, on the mild side - the primary flavor comp I experienced was <em>plum</em>; a touch of sweetness and sourness, but not really any citrus <em>per se</em>, and certainly not much bitterness.
After the first sip, I couldn’t tell if it was more sour or bitter.
It wasn’t until the second and third sip that I made up my mind; that’s how subtle it was.
The other flavor comps were structured, chocolate, and bisuit, but I could only really pick up notes of plum.</p>

<p>I had their honey process Costa Rican beans of the <a href="https://varieties.worldcoffeeresearch.org/varieties/catuai">Catuai variety of Arabica</a> from the Montero family - at first I thought <em>Montero</em> might have been referring to a coffee <em>variety</em> I’d not yet heard of, but no: these beans were <em>grown</em> by the Montero family, and <a href="https://www.morgoncoffeeroasters.com/products/carlos-montero-costa-rica-tarrazu">Morgon’s website has a whole page about their relationship with the Montero family</a>.
Carlos Montero even visited Morgon in Gothenburg to see their roasting operation.</p>

<p>For being a dark-roast kinda guy, I <em>really</em> enjoyed their espresso.
It’s obvious they care about coffee, their baristas are knoledgable, and they get their beans from a <em>serious</em> roasting company.
I would love to see more Morgon beans around town, maybe even in a second Adapt Cafe location.
I think they would get a lot of business in a more central location, though I do enjoy how many local roasters get the spotlight in cafes downtown.</p>

<hr />

<h3>
    <center>
        <a href="https://www.instagram.com/adaptcafe/" target="blank">
        Adapt Cafe insta
        </a>
        <hr />
        <a href="https://www.morgoncoffeeroasters.com/pages/about-us" target="blank">
        Morgon Coffee Roasters homepage
        </a>
    </center>
</h3>]]></content><author><name></name></author><summary type="html"><![CDATA[Pleasant, mild, unique, imported roasts from Sweden - try some beans you’ll likely not find anywhere else!]]></summary></entry></feed>